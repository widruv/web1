<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>genie</title>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="player.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="play_lists.js"></script>
    <script src="play_list_wrapper.js"></script>
    <script>
      var updateLyrics = function(self) {
        var currentTime = self.currentTime;
        for (var line in Lyrics.lyric[0].lines) {
          if (parseInt(Lyrics.lyric[0].lines[line].start) <= currentTime
            && parseInt(Lyrics.lyric[0].lines[line].end) >= currentTime) {
              $('#first_line').html(Lyrics.lyric[0].lines[line].lyric);
              console.log(Lyrics.lyric[0].lines.length);
              if (line != Lyrics.lyric[0].lines.length) {
                console.log(line+1);
                $('#second_line').html(Lyrics.lyric[0].lines[parseInt(line)+1].lyric);
              }
          }
        }
        /*
        if (self.currentTime >=0 && self.currentTime < 5) {
          $('#first_line').html(Lyrics.lyric[0].lines[0].lyric);
          $('#second_line').html(Lyrics.lyric[0].lines[1].lyric);
        }
        else {
          $('#first_line').html(Lyrics.lyric[0].lines[1].lyric);
        }
        */
      }
    </script>
  </head>
  <body onload="PlayListWrapper.show('play_list_wrapper')">
    <div class="web_player">
      <div class="player">
        <p id="genie">genie</p>
        <p id="song_title">RPG</p>
        <p id="singer">SEKAI NO OWARI</p>
        <img src="gakki.jpeg" id="cover_image">
        <div class="lyrics_main">
          <span class="lyrics" id="first_line"></span>
          <span class="lyrics" id="second_line"></span>
        </div>
        <audio id="audio" controls="controls" draggable="true" ontimeupdate="updateLyrics(this);">
          <source id="mp3_src" src="music/eva.mp3" type="audio/mpeg"/>
        </audio>
      </div>
      <div class="list">
        <div class="tab">
          <button id="tab_play_list">재생목록</button>
          <button id="tab_my_music">마이뮤직</button>
        </div>
        <div id="play_list_wrapper">
          <ul id="play_list">
          </ul>
        </div>
        <div class="toolbar">
          menu
        </div>
      </div>
    </div>

  </body>

</html>
